 /*  FIR
  Coeficientes:
  -0.018161596335410146
  -0.022750945545202503
  0.026960154865719534
  0.14940224353886064
  0.290005928547412
  0.35294963112469024
  0.290005928547412
  0.14940224353886064
  0.026960154865719534
  -0.022750945545202503
  -0.018161596335410146
*/
#define DAC_PIN 26 
#define ADC_PIN 34
float x[]={0,0,0,0,0,0,0,0,0,0,0};  
float y[]={0,0,0,0,0,0,0,0,0,0,0}; 

void setup() {
  Serial.begin(115200);
}

void loop() {
  x[0] = (float) analogRead(ADC_PIN)*3.3/4096;
 
  y[0]=-0.018161596335410146*x[0]-0.022750945545202503*x[1]+0.026960154865719534*x[2]+0.14940224353886064*x[3]+0.290005928547412*x[4]+0.35294963112469024*x[5]+0.290005928547412*x[6]+0.14940224353886064*x[7]+0.026960154865719534*x[8]-0.022750945545202503*x[9]-0.018161596335410146*x[10];
  float dacVoltage = (float)(y[0]*256/3.3);
  dacWrite(DAC_PIN,dacVoltage);
  for(int i = 10; i > 0; i--) {
    x[i] = x[i-1];
    y[i] = y[i-1]; 
  }
  delay(1);
}